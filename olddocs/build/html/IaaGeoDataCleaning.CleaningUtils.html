
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>IaaGeoDataCleaning.CleaningUtils package &#8212; IaaGeoData  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">IaaGeoData  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="iaageodatacleaning-cleaningutils-package">
<h1>IaaGeoDataCleaning.CleaningUtils package<a class="headerlink" href="#iaageodatacleaning-cleaningutils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-IaaGeoDataCleaning.CleaningUtils.DataModifier">
<span id="iaageodatacleaning-cleaningutils-datamodifier-module"></span><h2>IaaGeoDataCleaning.CleaningUtils.DataModifier module<a class="headerlink" href="#module-IaaGeoDataCleaning.CleaningUtils.DataModifier" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier">
<em class="property">class </em><code class="descname">Modifier</code><span class="sig-paren">(</span><em>incorrect_locs</em>, <em>correct_locs</em>, <em>geocoded_locs</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class acts as a command line tool for accepting/rejecting proposed data modifications and
stores the validated data and any data already marked as correct as a new file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>incorrect_locs</strong> – String filepath to flipped locations.</li>
<li><strong>correct_locs</strong> – String filepath to locations that have been verified.</li>
<li><strong>geocoded_locs</strong> – String filepath to geocoded locations</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier.make_commands">
<code class="descname">make_commands</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier.make_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Create lists of commands and their descriptions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Tuple containing commands, descriptions, and the help command</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>output_directory</em>, <em>lat_col='Latitude'</em>, <em>lng_col='Longitude'</em>, <em>rec_lat_col='Flipped_Lat'</em>, <em>rec_lng_col='Flipped_Lng'</em>, <em>country_col='Country'</em>, <em>loc_col='Location'</em>, <em>geoc_rec_lng_col='Geocoded_Lat'</em>, <em>geoc_rec_lat_col='Geocoded_Lng'</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.DataModifier.Modifier.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over cleaned data file and prompt user to confirm changes. Changes are then stored
in a new file and the original data is left untouched.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Params:</th><td class="field-body">Optional params to define column names</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-IaaGeoDataCleaning.CleaningUtils.coordinates_validator">
<span id="iaageodatacleaning-cleaningutils-coordinates-validator-module"></span><h2>IaaGeoDataCleaning.CleaningUtils.coordinates_validator module<a class="headerlink" href="#module-IaaGeoDataCleaning.CleaningUtils.coordinates_validator" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.add_country_code">
<code class="descname">add_country_code</code><span class="sig-paren">(</span><em>data</em>, <em>ctry_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.add_country_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Append two new columns to the data containing each entry’s country’s country codes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em>, </em><em>DataFrame</em><em>, </em><em>geopandas.GeoDataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>ctry_col</strong> (<em>str.</em>) – name of the country column.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the modified dataframe with the new columns ‘ISO2’ and ‘ISO3’ for two-letter and three-letter country
codes respectively.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataFrame if the type of <cite>data</cite> is DataFrame or str, or geopandas.GeoDataFrame if it is geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Rabat&#39;</span><span class="p">,</span> <span class="s1">&#39;Lyon&#39;</span><span class="p">,</span> <span class="s1">&#39;Cleveland&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Morocco&#39;</span><span class="p">,</span> <span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;United States of America&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_country_code</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">ctry_col</span><span class="o">=</span><span class="s1">&#39;Country&#39;</span><span class="p">)</span>
<span class="go">        City                   Country ISO2 ISO3</span>
<span class="go">0      Rabat                   Morocco   MA  MAR</span>
<span class="go">1       Lyon                    France   FR  FRA</span>
<span class="go">2  Cleveland  United States of America   US  USA</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.cell_in_data">
<code class="descname">cell_in_data</code><span class="sig-paren">(</span><em>data</em>, <em>val</em>, <em>col</em>, <em>abs_tol=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.cell_in_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the entries whose values in the passed column match the queried value.</p>
<p>If querying a numeric value, the function will return all entries whose corresponding cells approximate
the passed value with the specified absolute tolerance.</p>
<p>If querying a string, the function will return all entries whose corresponding cells contain the passed value,
case insensitive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em> or </em><em>DataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>val</strong> (<em>str</em><em>, </em><em>int</em><em>, or </em><em>float.</em>) – queried value.</li>
<li><strong>col</strong> (<em>str.</em>) – name of queried column.</li>
<li><strong>abs_tol</strong> (<em>float.</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">all entries meeting the condition.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Birmingham&#39;</span><span class="p">,</span> <span class="s1">&#39;Brussels&#39;</span><span class="p">,</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">],</span> <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;England&#39;</span><span class="p">,</span> <span class="s1">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s1">&#39;Germany&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">52.48</span><span class="p">,</span> <span class="mf">50.85</span><span class="p">,</span> <span class="mf">52.52</span><span class="p">],</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.89</span><span class="p">,</span> <span class="mf">4.35</span><span class="p">,</span> <span class="mf">13.40</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cell_in_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">&#39;brussels&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">&#39;City&#39;</span><span class="p">)</span>
<span class="go">       City  Country  Latitude  Longitude</span>
<span class="go">1  Brussels  Belgium     50.85       4.35</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cell_in_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">52.5</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">&#39;Latitude&#39;</span><span class="p">)</span>
<span class="go">         City  Country  Latitude  Longitude</span>
<span class="go">0  Birmingham  England     52.48      -1.89</span>
<span class="go">2      Berlin  Germany     52.52      13.40</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_columns">
<code class="descname">check_columns</code><span class="sig-paren">(</span><em>df</em>, <em>cols</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see whether the column names are present in the dataframe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>DataFrame</em><em> or </em><em>geopandas.GeoDataFrame.</em>) – </li>
<li><strong>cols</strong> (<em>list of str</em><em> or </em><em>set of str.</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">bool.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>KeyError</strong> – if any of the column names cannot be found in the dataframe.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Location&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Beijing&#39;</span><span class="p">,</span> <span class="s1">&#39;Sao Paulo&#39;</span><span class="p">,</span> <span class="s1">&#39;Amsterdam&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;China&#39;</span><span class="p">,</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> <span class="s1">&#39;Netherlands&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">    Location      Country</span>
<span class="go">0    Beijing        China</span>
<span class="go">1  Sao Paulo       Brazil</span>
<span class="go">2  Amsterdam  Netherlands</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_columns</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">,</span> <span class="s1">&#39;Location&#39;</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function will always return True or raise an error.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_country_geom">
<code class="descname">check_country_geom</code><span class="sig-paren">(</span><em>geodata</em>, <em>geo_iso2_col</em>, <em>shapedata</em>, <em>shape_geom_col</em>, <em>shape_iso2_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_country_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter all of the entries in <cite>geodata</cite> whose coordinates are within their indicated country by
iterating through a shapefile of country polygons and finding locations that are in each polygon.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>geodata</strong> (<em>geopandas.GeoDataFrame.</em>) – dataframe of locations with spatial geometries.</li>
<li><strong>geo_iso2_col</strong> (<em>str.</em>) – name of the two-letter country code column in dataframe.</li>
<li><strong>shapedata</strong> (<em>geopandas.GeoDataFrame.</em>) – shapefile dataframe.</li>
<li><strong>shape_geom_col</strong> (<em>str.</em>) – name of the geometry column in the shapefile dataframe.</li>
<li><strong>shape_iso2_col</strong> (<em>str.</em>) – name of the two-letter country code column in the shapefile dataframe.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">all of the entries that were verified as having their location in the respective indicated country.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_data_geom">
<code class="descname">check_data_geom</code><span class="sig-paren">(</span><em>eval_col</em>, <em>iso2_col</em>, <em>all_geodata</em>, <em>shapedata</em>, <em>shape_geom_col</em>, <em>shape_iso2_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.check_data_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Take in a collection of spatial dataframes that are variations of a single dataframe and check to see
which geometry actually fall within the borders of its preset country. If an entry is verified as correct
with its original inputs, the other variations will not be appended</p>
<p>Generate two dataframes, one that combines all of the entries in the collection that are marked as verified,
and one for entries whose respective geometry does not correspond to the preset country for any variation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>eval_col</strong> (<em>str.</em>) – name of the column to distinguish between entries (should be a column in all of the dataframes).</li>
<li><strong>iso2_col</strong> (<em>str.</em>) – name of the two-letter country code column.</li>
<li><strong>all_geodata</strong> (<em>geopandas.GeoDataFrame</em><em> or </em><em>list</em><em> or </em><em>set of geopandas.GeoDataFrame</em>) – collection of spatial dataframes.</li>
<li><strong>shapedata</strong> (<em>geopandas.GeoDataFrame.</em>) – shapefile dataframe.</li>
<li><strong>shape_geom_col</strong> (<em>str.</em>) – name of the geometry column in the shapefile dataframe.</li>
<li><strong>shape_iso2_col</strong> (<em>str.</em>) – name of the two-letter country code column in the shapefile dataframe.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">two dataframes, one with verified entries, and one with invalid entries.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple of (geopandas.GeoDataFrame, geopandas.GeoDataFrame)</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>..note::</dt>
<dd><p class="first">The function assumes that the first dataframe in the collection is the original dataframe.</p>
<p>The verified dataframe might contain multiple entries for the same initial entry if two or more of its
variations match its preset country.</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">flip_coords()</span></code> should be called first to generate the dataframe collection
to optimize this function.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.convert_df_crs">
<code class="descname">convert_df_crs</code><span class="sig-paren">(</span><em>df</em>, <em>out_crs=4326</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.convert_df_crs" title="Permalink to this definition">¶</a></dt>
<dd><p>Change projection from input projection to provided crs (defaults to 4326)</p>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.cross_check">
<code class="descname">cross_check</code><span class="sig-paren">(</span><em>data</em>, <em>first_col</em>, <em>second_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.cross_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter all of the entries in <cite>data</cite> whose values for <code class="docutils literal notranslate"><span class="pre">first_col</span></code> and <code class="docutils literal notranslate"><span class="pre">second_col</span></code> are equal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em> or </em><em>DataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>first_col</strong> (<em>str.</em>) – column name.</li>
<li><strong>second_col</strong> (<em>str.</em>) – column name.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">all qualified entries.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Australia&#39;</span><span class="p">,</span> <span class="s1">&#39;Indonesia&#39;</span><span class="p">,</span> <span class="s1">&#39;Denmark&#39;</span><span class="p">],</span> <span class="s1">&#39;Entered_ISO2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;AUS&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;DK&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Matched_ISO2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;AU&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;DK&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cross_check</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">first_col</span><span class="o">=</span><span class="s1">&#39;Entered_ISO2&#39;</span><span class="p">,</span> <span class="n">second_col</span><span class="o">=</span><span class="s1">&#39;Matched_ISO2&#39;</span><span class="p">)</span>
<span class="go">     Country Entered_ISO2 Matched_ISO2</span>
<span class="go">1  Indonesia           ID           ID</span>
<span class="go">2    Denmark           DK           DK</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.export_df">
<code class="descname">export_df</code><span class="sig-paren">(</span><em>df</em>, <em>extension</em>, <em>filename</em>, <em>directory</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.export_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the dataframe to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> (<em>DataFrame</em><em> or </em><em>geopandas.GeoDataFrame.</em>) – </li>
<li><strong>extension</strong> (<em>str.</em>) – outfile extension (.csv or .xlsx).</li>
<li><strong>filename</strong> (<em>str.</em>) – outfile name (without extension).</li>
<li><strong>directory</strong> (<em>str.</em>) – outfile directory.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">absolute filepath to outfile.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">str.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>TypeError</strong> – if file extension is not csv or  xlsx.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.filter_data_without_coords">
<code class="descname">filter_data_without_coords</code><span class="sig-paren">(</span><em>data</em>, <em>lat_col</em>, <em>lng_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.filter_data_without_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate two dataframes to filter out entries where no latitudinal and longitudinal data was entered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em>, </em><em>DataFrame</em><em>, </em><em>geopandas.GeoDataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>lat_col</strong> (<em>str.</em>) – name of the latitude column.</li>
<li><strong>lng_col</strong> (<em>str.</em>) – name of the longitude column.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">two dataframes, one with all of the entries with coordinates and one of those without.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple of (DataFrame, DataFrame) if the type of <cite>data</cite> is DataFrame or str,
tuple of (geopandas.GeoDataFrame, geopandas.GeoDataFrame) if it is geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Entries whose latitude and longitude are both 0 are considered as having no inputs.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Addis Ababa&#39;</span><span class="p">,</span> <span class="s1">&#39;Manila&#39;</span><span class="p">,</span> <span class="s1">&#39;Dubai&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Ethiopia&#39;</span><span class="p">,</span> <span class="s1">&#39;Philippines&#39;</span><span class="p">,</span> <span class="s1">&#39;United Arab Emirates&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">8.98</span><span class="p">,</span> <span class="mf">14.35</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">38.76</span><span class="p">,</span> <span class="mf">21.00</span><span class="p">,</span> <span class="mi">0</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_data_without_coords</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">lat_col</span><span class="o">=</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="n">lng_col</span><span class="o">=</span><span class="s1">&#39;Longitude&#39;</span><span class="p">)</span>
<span class="go">(         City      Country  Latitude  Longitude</span>
<span class="go">0  Addis Ababa     Ethiopia      8.98      38.76</span>
<span class="go">1       Manila  Philippines     14.35      21.00,</span>
<span class="go">    City               Country  Latitude  Longitude</span>
<span class="go">2  Dubai  United Arab Emirates       0.0        0.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.flip_coords">
<code class="descname">flip_coords</code><span class="sig-paren">(</span><em>data</em>, <em>lat_col</em>, <em>lng_col</em>, <em>prj=4326</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.flip_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 8 geopandas.GeoDataFrames, each with two columns comprising one latitude-longitude combination among
[(lat, lng), (lat, -lng), (-lat, lng), (-lat, -lng),</p>
<blockquote>
<div>(lng, lat), (lng, -lat), (-lng, lat), (-lng, -lat)].</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em>, </em><em>DataFrame</em><em>, </em><em>geopandas.GeoDataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>lat_col</strong> (<em>str.</em>) – name of the latitude column.</li>
<li><strong>lng_col</strong> (<em>str.</em>) – name of the longitude column.</li>
<li><strong>prj</strong> (<em>int.</em>) – EPSG code for spatial projection.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Addis Ababa&#39;</span><span class="p">,</span> <span class="s1">&#39;Manila&#39;</span><span class="p">,</span> <span class="s1">&#39;Vienna&#39;</span><span class="p">,</span> <span class="s1">&#39;Mexico City&#39;</span><span class="p">,</span> <span class="s1">&#39;Puebla&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Ethiopia&#39;</span><span class="p">,</span> <span class="s1">&#39;Philippines&#39;</span><span class="p">,</span> <span class="s1">&#39;Austria&#39;</span><span class="p">,</span> <span class="s1">&#39;Mexico&#39;</span><span class="p">,</span> <span class="s1">&#39;Mexico&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">8.98</span><span class="p">,</span> <span class="mf">14.35</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">19.25</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">38.76</span><span class="p">,</span> <span class="mf">21.00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">99.10</span><span class="p">,</span> <span class="kc">None</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">flip_coords</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">lat_col</span><span class="o">=</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="n">lng_col</span><span class="o">=</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="n">prj</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dfs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">          City      Country  Latitude  Longitude  Flipped_Lat  Flipped_Lng             geometry</span>
<span class="go">0  Addis Ababa  Ethiopia         8.98      38.76         8.98       -38.76  POINT (-38.76 8.98)</span>
<span class="go">1  Manila       Philippines     14.35      21.00        14.35       -21.00    POINT (-21 14.35)</span>
<span class="go">2  Vienna       Austria         0.00        0.00         0.00        -0.00         POINT (-0 0)</span>
<span class="go">3  Mexico City  Mexico          19.25     -99.10        19.25        99.10  POINT (99.10 19.25)</span>
<span class="go">4  Puebla       Mexico            NaN        NaN         0.00         0.00          POINT (0 0)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Point geometry is formatted as (lng, lat).</p>
<p class="last">Null latitude and longitude are converted to 0s.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.geocode_coordinates">
<code class="descname">geocode_coordinates</code><span class="sig-paren">(</span><em>data</em>, <em>loc_col</em>, <em>ctry_col</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.geocode_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Use Photon API to geocode entries based on their location and country to find their coordinates.</p>
<p>Perform a quick validation of the query result by comparing the returned country to the preset country.</p>
<p>Three new fields representing the returned address, latitude, and longitude are appended to geocoded entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em> or </em><em>DataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>loc_col</strong> (<em>str.</em>) – name of the location (lower level) column.</li>
<li><strong>ctry_col</strong> (<em>str.</em>) – name of the location (higher level) column.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">two dataframes, one with all of the locations that Photon was able to find, and one with locations that
could not be queried.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple of (DataFrame, DataFrame)</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Returned locations might not be 100% accurate.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Toronto&#39;</span><span class="p">,</span> <span class="s1">&#39;Dhaka&#39;</span><span class="p">,</span> <span class="s1">&#39;San Andres&#39;</span><span class="p">],</span> <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Canada&#39;</span><span class="p">,</span> <span class="s1">&#39;Bangladesh&#39;</span><span class="p">,</span> <span class="s1">&#39;El Salvador&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geocode_coordinates</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">loc_col</span><span class="o">=</span><span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="n">ctry_col</span><span class="o">=</span><span class="s1">&#39;City&#39;</span><span class="p">)</span>
<span class="go">(     City        Country                            Geocoded_Adr  Geocoded_Lat  Geocoded_Lng</span>
<span class="go">0  Toronto     Canada       Toronto, Ontario, Canada                  43.653963    -79.387207</span>
<span class="go">1  Dhaka       Bangladesh   Dhaka, 12, Dhaka Division, Bangladesh     23.759357     90.378814,</span>
<span class="go">         City      Country</span>
<span class="go">3  San Andres  El Salvador)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.get_projection">
<code class="descname">get_projection</code><span class="sig-paren">(</span><em>prj_file</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.get_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the EPSG code from .prj file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prj_file</strong> (<em>str.</em>) – filepath to the .prj file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int.</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_projection</span><span class="p">(</span><span class="s1">&#39;/home/example_user/example_shapefile_directory/example_shapefile.prj&#39;</span><span class="p">)</span>
<span class="go">4326</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.get_shape">
<code class="descname">get_shape</code><span class="sig-paren">(</span><em>shp_file</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.get_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a GeoDataFrame from .shp file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shp_file</strong> (<em>str.</em>) – filepath to the .shp file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">geopandas.GeoDataFrame</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.process_shapefile">
<code class="descname">process_shapefile</code><span class="sig-paren">(</span><em>shapefile=None</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.process_shapefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Take in a shapefile directory and parse the filepath to each file in the directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shapefile</strong> (<em>str</em>) – filepath to shapefile directory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary with the file extension as keys and the complete filepath as values.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict of {str: str}</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">process_shapefile</span><span class="p">(</span><span class="s1">&#39;/home/example_user/example_shapefile_directory&#39;</span><span class="p">)</span>
<span class="go">{&#39;dbf&#39;: &#39;/home/example_user/example_shapefile_directory/example_shapefile.dbf&#39;,</span>
<span class="go"> &#39;prj&#39;: &#39;/home/example_user/example_shapefile_directory/example_shapefile.prj&#39;,</span>
<span class="go"> &#39;shp&#39;: &#39;/home/example_user/example_shapefile_directory/example_shapefile.shp&#39;,</span>
<span class="go"> &#39;shx&#39;: &#39;/home/example_user/example_shapefile_directory/example_shapefile.shx&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.query_data">
<code class="descname">query_data</code><span class="sig-paren">(</span><em>data</em>, <em>query_dict</em>, <em>excl=False</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.query_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all entries that meet the conditions specified in the query dictionary.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">excl=True</span></code>, the function only returns entries meeting every single criteria. Else, it returns any entry
that meets at least one of the conditions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em> or </em><em>DataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>query_dict</strong> (<em>dict of {str: list</em><em>, </em><em>str: set</em><em>, or </em><em>str: str}.</em>) – dictionary whose keys are column names mapping to the queried value(s).</li>
<li><strong>excl</strong> (<em>bool.</em>) – exclusive or inclusive search.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">all entries meeting the condition(s).</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Birmingham&#39;</span><span class="p">,</span> <span class="s1">&#39;Brussels&#39;</span><span class="p">,</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">],</span> <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;England&#39;</span><span class="p">,</span> <span class="s1">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s1">&#39;Germany&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">52.48</span><span class="p">,</span> <span class="mf">50.85</span><span class="p">,</span> <span class="mf">52.52</span><span class="p">],</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.89</span><span class="p">,</span> <span class="mf">4.35</span><span class="p">,</span> <span class="mf">13.40</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">query_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">52.5</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">},</span> <span class="n">excl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">         City  Country  Latitude  Longitude</span>
<span class="go">0  Birmingham  England     52.48      -1.89</span>
<span class="go">2      Berlin  Germany     52.52      13.40</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">query_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="mf">52.5</span><span class="p">,</span> <span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="s1">&#39;berlin&#39;</span><span class="p">},</span> <span class="n">excl</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">     City  Country  Latitude  Longitude</span>
<span class="go">2  Berlin  Germany     52.52       13.4</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.read_data">
<code class="descname">read_data</code><span class="sig-paren">(</span><em>data</em>, <em>cols</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.read_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a dataframe and verify that the specified columns are in the dataframe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em>, </em><em>DataFrame</em><em>, </em><em>geopandas.GeoDataFrame</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>cols</strong> (<em>list of str</em><em> or </em><em>set of str.</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">DataFrame if the type of <cite>data</cite> is DataFrame or str, or geopandas.GeoDataFrame if it is geopandas.GeoDataFrame.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>TypeError</strong> – if a different type is passed for <cite>data</cite> or the file extension is not .csv or .xlsx.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;City&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Delhi&#39;</span><span class="p">,</span> <span class="s1">&#39;Giza&#39;</span><span class="p">],</span> <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;India&#39;</span><span class="p">,</span> <span class="s1">&#39;Egypt&#39;</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">28.68</span><span class="p">,</span> <span class="mf">30.01</span><span class="p">],</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">77.22</span><span class="p">,</span> <span class="mf">31.13</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Country&#39;</span><span class="p">,</span> <span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">})</span>
<span class="go">    City Country  Latitude  Longitude</span>
<span class="go">0  Delhi   India     28.68      77.22</span>
<span class="go">1   Giza   Egypt     30.01      31.13</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.read_file">
<code class="descname">read_file</code><span class="sig-paren">(</span><em>file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.read_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a dataframe from .xlsx or .csv file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_path</strong> (<em>str.</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">DataFrame.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><strong>TypeError</strong> – if the file extension is not .csv or .xlsx.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.rtree">
<code class="descname">rtree</code><span class="sig-paren">(</span><em>geodata</em>, <em>polygon</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.rtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Use geopandas’s R-tree implementation to find all of the locations in <cite>geodata</cite> in the spatial polygon.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>geodata</strong> (<em>geopandas.GeoDataFrame.</em>) – dataframe of locations with spatial geometries.</li>
<li><strong>polygon</strong> (<em>shapely.geometry.Polygon.</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">all of the entries with locations in the polygon.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IaaGeoDataCleaning.CleaningUtils.coordinates_validator.to_gdf">
<code class="descname">to_gdf</code><span class="sig-paren">(</span><em>data</em>, <em>lat_col</em>, <em>lng_col</em>, <em>prj=4326</em><span class="sig-paren">)</span><a class="headerlink" href="#IaaGeoDataCleaning.CleaningUtils.coordinates_validator.to_gdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a geopandas.GeoDataFrame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>str</em><em> or </em><em>DataFrame.</em>) – filepath (.csv or .xlsx extension) or dataframe.</li>
<li><strong>lat_col</strong> (<em>str.</em>) – name of the latitude column.</li>
<li><strong>lng_col</strong> (<em>str.</em>) – name of the longitude column.</li>
<li><strong>prj</strong> (<em>int.</em>) – EPSG code for spatial projection.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">geopandas.GeoDataFrame.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-IaaGeoDataCleaning.CleaningUtils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-IaaGeoDataCleaning.CleaningUtils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">IaaGeoDataCleaning.CleaningUtils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-IaaGeoDataCleaning.CleaningUtils.DataModifier">IaaGeoDataCleaning.CleaningUtils.DataModifier module</a></li>
<li><a class="reference internal" href="#module-IaaGeoDataCleaning.CleaningUtils.coordinates_validator">IaaGeoDataCleaning.CleaningUtils.coordinates_validator module</a></li>
<li><a class="reference internal" href="#module-IaaGeoDataCleaning.CleaningUtils">Module contents</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/IaaGeoDataCleaning.CleaningUtils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">IaaGeoData  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Samantha Fritsche, Thy Nguyen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>